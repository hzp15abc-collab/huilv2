<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šåŠŸèƒ½å…‘æ¢å·¥å…· (è´§å¸ & é¢ç§¯)</title>
    <style>
        :root {
            --primary-color: #007AFF;
            --bg-color: #f4f6f8;
            --card-bg: #ffffff;
            --text-color: #333;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 500px;
            background-color: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            overflow: hidden;
        }

        /* é¡¶éƒ¨æ—¶é’ŸåŒºåŸŸ */
        .header {
            background-color: var(--primary-color);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .time-display {
            font-size: 2em;
            font-weight: bold;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }

        .date-display {
            font-size: 0.9em;
            opacity: 0.9;
        }

        /* åŠŸèƒ½æ¨¡å— */
        .section {
            padding: 25px;
            border-bottom: 1px solid #eee;
        }

        .section-title {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .section-title span {
            margin-right: 10px;
        }

        /* è¾“å…¥æ§ä»¶ç»„ */
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 15px;
        }

        .row {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        input[type="number"] {
            flex: 1;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1.1em;
            outline: none;
            transition: border-color 0.3s;
        }

        input[type="number"]:focus {
            border-color: var(--primary-color);
        }

        select {
            flex: 0 0 120px;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            background-color: #fff;
        }

        .swap-btn {
            align-self: center;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.5em;
            color: var(--primary-color);
            padding: 5px;
            transition: transform 0.2s;
        }

        .swap-btn:hover {
            transform: scale(1.1);
        }

        .result-box {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: right;
            font-size: 1.5em;
            font-weight: bold;
            color: var(--primary-color);
            min-height: 1.5em;
        }

        .rate-info {
            font-size: 0.8em;
            color: #888;
            margin-top: 5px;
            text-align: right;
        }

        /* ç§»åŠ¨ç«¯é€‚é… */
        @media (max-width: 480px) {
            .time-display { font-size: 1.5em; }
            input[type="number"], select { font-size: 0.9em; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <div class="time-display" id="clock">00:00:00</div>
        <div class="date-display" id="date">åŠ è½½ä¸­...</div>
    </div>

    <div class="section">
        <div class="section-title"><span>ğŸ’±</span> è´§å¸å®æ—¶å…‘æ¢</div>

        <div class="input-group">
            <div class="row">
                <input type="number" id="curr-amount" value="100" placeholder="é‡‘é¢">
                <select id="curr-from">
                    <option value="CNY" selected>ğŸ‡¨ğŸ‡³ äººæ°‘å¸ (CNY)</option>
                    <option value="SGD">ğŸ‡¸ğŸ‡¬ æ–°å¸ (SGD)</option>
                    <option value="HKD">ğŸ‡­ğŸ‡° æ¸¯å¸ (HKD)</option>
                    <option value="THB">ğŸ‡¹ğŸ‡­ æ³°é“¢ (THB)</option>
                    <option value="TWD">ğŸ‡¹ğŸ‡¼ å°å¸ (TWD)</option>
                    <option value="JPY">ğŸ‡¯ğŸ‡µ æ—¥å…ƒ (JPY)</option>
                    <option disabled>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</option>
                    <option value="USD">ğŸ‡ºğŸ‡¸ ç¾å…ƒ (USD)</option>
                    <option value="EUR">ğŸ‡ªğŸ‡º æ¬§å…ƒ (EUR)</option>
                </select>
            </div>

            <button class="swap-btn" onclick="swapCurrency()">â‡…</button>

            <div class="row">
                <select id="curr-to">
                    <option value="CNY">ğŸ‡¨ğŸ‡³ äººæ°‘å¸ (CNY)</option>
                    <option value="SGD" selected>ğŸ‡¸ğŸ‡¬ æ–°å¸ (SGD)</option>
                    <option value="HKD">ğŸ‡­ğŸ‡° æ¸¯å¸ (HKD)</option>
                    <option value="THB">ğŸ‡¹ğŸ‡­ æ³°é“¢ (THB)</option>
                    <option value="TWD">ğŸ‡¹ğŸ‡¼ å°å¸ (TWD)</option>
                    <option value="JPY">ğŸ‡¯ğŸ‡µ æ—¥å…ƒ (JPY)</option>
                    <option disabled>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</option>
                    <option value="USD">ğŸ‡ºğŸ‡¸ ç¾å…ƒ (USD)</option>
                    <option value="EUR">ğŸ‡ªğŸ‡º æ¬§å…ƒ (EUR)</option>
                </select>
            </div>

            <div class="result-box" id="curr-result">è®¡ç®—ä¸­...</div>
            <div class="rate-info" id="rate-info">æ­£åœ¨è·å–æœ€æ–°æ±‡ç‡...</div>
        </div>
    </div>

    <div class="section">
        <div class="section-title"><span>ğŸ“</span> é¢ç§¯æ¢ç®— (å«å°æ¹¾åª)</div>

        <div class="input-group">
            <div class="row">
                <input type="number" id="area-amount" value="1" placeholder="é¢ç§¯">
                <select id="area-from">
                    <option value="sqm" selected>å¹³æ–¹ç±³ (mÂ²)</option>
                    <option value="sqft">å¹³æ–¹è‹±å°º (ftÂ²)</option>
                    <option value="ping">å°æ¹¾åª (åª)</option>
                </select>
            </div>

            <button class="swap-btn" onclick="swapArea()">â‡…</button>

            <div class="row">
                <select id="area-to">
                    <option value="sqm">å¹³æ–¹ç±³ (mÂ²)</option>
                    <option value="sqft">å¹³æ–¹è‹±å°º (ftÂ²)</option>
                    <option value="ping" selected>å°æ¹¾åª (åª)</option>
                </select>
            </div>

            <div class="result-box" id="area-result">0.3025</div>
        </div>
    </div>
</div>

<script>
    // --- 1. æ—¶é’ŸåŠŸèƒ½ ---
    function updateClock() {
        const now = new Date();
        const timeString = now.toLocaleTimeString('zh-CN', { hour12: false });
        const dateString = now.toLocaleDateString('zh-CN', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' });

        document.getElementById('clock').textContent = timeString;
        document.getElementById('date').textContent = dateString;
    }
    setInterval(updateClock, 1000);
    updateClock();

    // --- 2. è´§å¸åŠŸèƒ½ ---
    // æ³¨æ„ï¼šå®é™…ç”Ÿäº§ç¯å¢ƒå»ºè®®ç”³è¯·è‡ªå·±çš„ API Keyã€‚è¿™é‡Œä½¿ç”¨å…¬å…±å…è´¹æ¥å£ã€‚
    // å¦‚æœ API æŒ‚äº†ï¼Œä¼šå›é€€åˆ° fallbackRates (å¤§è‡´å‚è€ƒå€¼)
    const API_URL = "https://api.exchangerate-api.com/v4/latest/CNY"; // ä»¥äººæ°‘å¸ä¸ºåŸºå‡†

    let exchangeRates = {};
    // å¤‡ç”¨é™æ€æ±‡ç‡ (é˜²æ­¢ API æ— æ³•è®¿é—®æ—¶å´©æºƒ)
    const fallbackRates = {
        "CNY": 1,
        "SGD": 0.18,
        "HKD": 1.08,
        "THB": 4.95,
        "TWD": 4.40,
        "JPY": 20.5,
        "USD": 0.14,
        "EUR": 0.13
    };

    async function fetchRates() {
        const infoDiv = document.getElementById('rate-info');
        try {
            const response = await fetch(API_URL);
            const data = await response.json();
            exchangeRates = data.rates; // è·å–ç›¸å¯¹äº CNY çš„æ±‡ç‡

            infoDiv.textContent = `æ±‡ç‡æ›´æ–°æ—¶é—´: ${new Date(data.date).toLocaleDateString()}`;
            calculateCurrency();
        } catch (error) {
            console.warn("APIè¿æ¥å¤±è´¥ï¼Œä½¿ç”¨ç¦»çº¿å‚è€ƒæ±‡ç‡", error);
            exchangeRates = fallbackRates;
            infoDiv.textContent = "âš ï¸ ç½‘ç»œæœªè¿æ¥ï¼Œä½¿ç”¨ç¦»çº¿å‚è€ƒæ±‡ç‡";
            calculateCurrency();
        }
    }

    function calculateCurrency() {
        const amount = parseFloat(document.getElementById('curr-amount').value);
        const from = document.getElementById('curr-from').value;
        const to = document.getElementById('curr-to').value;
        const resultDiv = document.getElementById('curr-result');

        if (isNaN(amount)) {
            resultDiv.textContent = "---";
            return;
        }

        const rateFrom = exchangeRates[from];
        const rateTo = exchangeRates[to];

        if (!rateFrom || !rateTo) return;

        const inCNY = amount / rateFrom;
        const finalAmount = inCNY * rateTo;

        resultDiv.textContent = finalAmount.toLocaleString('zh-CN', { maximumFractionDigits: 2 }) + " " + to;
    }

    function swapCurrency() {
        const from = document.getElementById('curr-from');
        const to = document.getElementById('curr-to');
        const temp = from.value;
        from.value = to.value;
        to.value = temp;
        calculateCurrency();
    }

    document.getElementById('curr-amount').addEventListener('input', calculateCurrency);
    document.getElementById('curr-from').addEventListener('change', calculateCurrency);
    document.getElementById('curr-to').addEventListener('change', calculateCurrency);

    // --- 3. é¢ç§¯åŠŸèƒ½ ---
    // æ¢ç®—ç³»æ•° (ä»¥å¹³æ–¹ç±³ä¸ºåŸºå‡† 1 sqm)
    const areaRates = {
        "sqm": 1,
        "sqft": 10.7639,
        "ping": 0.3025
    };

    function calculateArea() {
        const amount = parseFloat(document.getElementById('area-amount').value);
        const from = document.getElementById('area-from').value;
        const to = document.getElementById('area-to').value;
        const resultDiv = document.getElementById('area-result');

        if (isNaN(amount)) {
            resultDiv.textContent = "---";
            return;
        }

        let inSqm = 0;
        if (from === 'sqm') inSqm = amount;
        else inSqm = amount / areaRates[from];

        let finalArea = 0;
        if (to === 'sqm') finalArea = inSqm;
        else finalArea = inSqm * areaRates[to];

        resultDiv.textContent = finalArea.toLocaleString('zh-CN', { maximumFractionDigits: 4 });
    }

    function swapArea() {
        const from = document.getElementById('area-from');
        const to = document.getElementById('area-to');
        const temp = from.value;
        from.value = to.value;
        to.value = temp;
        calculateArea();
    }

    document.getElementById('area-amount').addEventListener('input', calculateArea);
    document.getElementById('area-from').addEventListener('change', calculateArea);
    document.getElementById('area-to').addEventListener('change', calculateArea);

    fetchRates();
    calculateArea();
</script>

</body>
</html>
